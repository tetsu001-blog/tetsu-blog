{{ .Scratch.Set "thumb" .Params.image }}
{{ if not (.Scratch.Get "thumb") }}
{{ $matches := findRE "(?i)src=[\"']([^\"']+)[\"']" .Content 1 }}
{{ if len $matches }}
{{ .Scratch.Set "thumb" (replaceRE "(?i).*?src=[\"'](.*?)[\"'].*" "$1" (index $matches 0)) }}
{{ end }}
{{ end }}
{{ return (.Scratch.Get "thumb") }}